const fs = require('fs');

// server.jsのバックアップを作成（念のため）
fs.copyFileSync('server.js', 'server.js.pattern_backup');

// server.jsの内容を読み込む
let content = fs.readFileSync('server.js', 'utf8');

// 新しい否定的フィードバックパターン
const newNegativePatterns = [
  '要らない', 'いらない', '不要', '邪魔', '見たくない', 
  '表示しないで', '非表示', '消して', '表示するな', '出すな',
  // サービス関連
  'サービス要らない', 'サービスいらない', 'サービス不要', 'サービス邪魔', 
  'サービス表示しないで', 'サービス非表示', 'サービス消して', 'サービス表示するな', 
  'サービス出すな', 'サービス止めて', 'サービスやめて', 'サービス停止',
  // お勧め/おすすめ関連
  'お勧め要らない', 'お勧めいらない', 'お勧め不要', 'お勧め邪魔', 
  'お勧め表示しないで', 'お勧め非表示', 'お勧め消して', 'お勧め表示するな', 
  'お勧め出すな', 'お勧め止めて', 'お勧めやめて', 'お勧め停止',
  'おすすめ要らない', 'おすすめいらない', 'おすすめ不要', 'おすすめ邪魔', 
  'おすすめ表示しないで', 'おすすめ非表示', 'おすすめ消して', 'おすすめ表示するな', 
  'おすすめ出すな', 'おすすめ止めて', 'おすすめやめて', 'おすすめ停止',
  'オススメ要らない', 'オススメいらない', 'オススメ不要', 'オススメ邪魔', 
  'オススメ表示しないで', 'オススメ非表示', 'オススメ消して', 'オススメ表示するな', 
  'オススメ出すな', 'オススメ止めて', 'オススメやめて', 'オススメ停止',
  // 推奨関連
  '推奨要らない', '推奨いらない', '推奨不要', '推奨邪魔', 
  '推奨表示しないで', '推奨非表示', '推奨消して', '推奨表示するな', 
  '推奨出すな', '推奨止めて', '推奨やめて', '推奨停止',
  // 丁寧な表現
  'サービスは結構です', 'お勧めは結構です', 'おすすめは結構です', 'オススメは結構です', '推奨は結構です',
  'サービス要りません', 'お勧め要りません', 'おすすめ要りません', 'オススメ要りません', '推奨要りません',
  'サービスはいりません', 'お勧めはいりません', 'おすすめはいりません', 'オススメはいりません', '推奨はいりません',
  'サービスは不要です', 'お勧めは不要です', 'おすすめは不要です', 'オススメは不要です', '推奨は不要です',
  // 「〜ない」形式
  'サービス表示しない', 'お勧め表示しない', 'おすすめ表示しない', 'オススメ表示しない', '推奨表示しない',
  'サービス必要ない', 'お勧め必要ない', 'おすすめ必要ない', 'オススメ必要ない', '推奨必要ない',
  'サービス見せない', 'お勧め見せない', 'おすすめ見せない', 'オススメ見せない', '推奨見せない',
  // その他
  'やめてください', '止めてください', '停止してください',
  'もういい', 'もういらない', 'もう十分', 'もう結構',
  'うざい', 'うるさい', 'しつこい', 'ノイズ', '迷惑'
];

// パターンを文字列に変換
const patternString = newNegativePatterns.map(p => `'${p}'`).join(', ');

// 正規表現で置換（否定的パターンの部分を置き換える）
const regex = /negative: \[\s+(['"].*?['"],\s*)+?\s*\]/s;
const replacement = `negative: [\n        ${patternString}\n      ]`;

content = content.replace(regex, replacement);

// 更新した内容をファイルに書き込む
fs.writeFileSync('server.js', content);

console.log(`パターンの更新が完了しました。合計 ${newNegativePatterns.length} 個のパターンが追加されました。`);
