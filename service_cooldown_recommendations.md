# サービスのクールダウン期間に関する推奨事項

## 現状の問題点

ログを分析したところ、以下の問題が確認されました：

1. ユーザーがアドバイスを明示的に求めていない場合でもサービスが表示されている
2. 短期間に同じサービスが繰り返し表示されている
3. サービスごとに設定されているクールダウン期間（cooldown_days）が適切に守られていない

## サービスタイプ別の推奨クールダウン期間

サービスの性質に基づいて、以下のクールダウン期間を推奨します：

| サービスタイプ | 推奨クールダウン期間 | 説明 |
|--------------|-----------------|------|
| 一般的な就労支援サービス | 14-21日 | 就職活動は通常数週間〜数ヶ月のプロセスであり、短期間での再表示は不要 |
| 緊急サポートサービス | 7日 | 危機的状況に対応するサービスは比較的短いクールダウンが適切 |
| 情報提供・コミュニティサービス | 30日 | 一度紹介すれば十分で、頻繁な再表示は不要 |
| 教育・療育サービス | 30日 | 長期的な関わりが必要なサービスで、決断には時間がかかる |

## 現在のサービス設定の確認と推奨

`services.js` ファイルを確認したところ、多くのサービスは適切なクールダウン期間（14日）が設定されていますが、いくつかのサービスについては調整が必要かもしれません：

### 就労支援サービス（現在14日）
- comoly, dcareer, litalico, kaien, welbe, atgp, specialisterne, mirairo, pasona_heartful
- **推奨**: 現状の14日を維持、または特に人気の高いサービスは21日に延長

### 訪問支援サービス
- newstart（現在21日）
- **推奨**: 現状の21日を維持

### 情報提供・コミュニティサービス（現在30日）
- autism_society, ddac
- **推奨**: 現状の30日を維持

### 教育・療育サービス（現在30日）
- compass, litalico_junior
- **推奨**: 現状の30日を維持

### 危機支援サービス（現在7日）
- inochi_hotline, yorisoi_hotline
- **推奨**: 現状の7日を維持

## 実装の改善点

1. **明示的なアドバイス要求の厳格化**:
   - ユーザーが明示的にアドバイスを求めた場合のみサービスを表示する
   - 「アドバイスください」などの明確な表現がある場合のみ表示する

2. **サービス固有のクールダウン期間の尊重**:
   - 各サービスの `cooldown_days` 設定を尊重し、その期間内は同じサービスを再表示しない
   - 例：14日のクールダウンが設定されているサービスは、最低14日間は再表示しない

3. **ユーザー体験の向上**:
   - サービス推奨が表示される理由をログに記録し、デバッグを容易にする
   - サービス推奨が表示されない理由も同様にログに記録する

## 実装手順

1. `server.js` ファイルの `shouldShowServicesToday` 関数を修正して、明示的なアドバイス要求のみに対応するようにする
2. サービス固有のクールダウン期間をチェックするロジックを追加する
3. ログ出力を強化して、サービス推奨の表示/非表示の理由を明確にする
4. 変更をテストして、サービス推奨が適切なタイミングでのみ表示されることを確認する 